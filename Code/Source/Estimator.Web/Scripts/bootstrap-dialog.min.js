(function(n,t){"use strict";typeof module!="undefined"&&module.exports?module.exports=t(require("jquery")(n)):typeof define=="function"&&define.amd?define("bootstrap-dialog",["jquery"],function(n){return t(n)}):n.BootstrapDialog=t(n.jQuery)})(this,function(n){"use strict";var t=function(i){this.defaultOptions=n.extend(!0,{id:t.newGuid(),buttons:[],data:{},onshow:null,onshown:null,onhide:null,onhidden:null},t.defaultOptions);this.indexedButtons={};this.registeredButtonHotkeys={};this.draggableData={isMouseDown:!1,mouseOffset:{}};this.realized=!1;this.opened=!1;this.initOptions(i);this.holdThisInstance()};return t.NAMESPACE="bootstrap-dialog",t.TYPE_DEFAULT="type-default",t.TYPE_INFO="type-info",t.TYPE_PRIMARY="type-primary",t.TYPE_SUCCESS="type-success",t.TYPE_WARNING="type-warning",t.TYPE_DANGER="type-danger",t.DEFAULT_TEXTS={},t.DEFAULT_TEXTS[t.TYPE_DEFAULT]="Information",t.DEFAULT_TEXTS[t.TYPE_INFO]="Information",t.DEFAULT_TEXTS[t.TYPE_PRIMARY]="Information",t.DEFAULT_TEXTS[t.TYPE_SUCCESS]="Success",t.DEFAULT_TEXTS[t.TYPE_WARNING]="Warning",t.DEFAULT_TEXTS[t.TYPE_DANGER]="Danger",t.DEFAULT_TEXTS.OK="OK",t.DEFAULT_TEXTS.CANCEL="Cancel",t.SIZE_NORMAL="size-normal",t.SIZE_LARGE="size-large",t.BUTTON_SIZES={},t.BUTTON_SIZES[t.SIZE_NORMAL]="",t.BUTTON_SIZES[t.SIZE_LARGE]="btn-lg",t.ICON_SPINNER="glyphicon glyphicon-asterisk",t.ZINDEX_BACKDROP=0,t.ZINDEX_MODAL=1050,t.defaultOptions={type:t.TYPE_PRIMARY,size:t.SIZE_NORMAL,cssClass:"",title:null,message:null,nl2br:!0,closable:!0,closeByBackdrop:!0,closeByKeyboard:!0,spinicon:t.ICON_SPINNER,autodestroy:!0,draggable:!1,animate:!0,description:""},t.configDefaultOptions=function(i){t.defaultOptions=n.extend(!0,t.defaultOptions,i)},t.dialogs={},t.openAll=function(){n.each(t.dialogs,function(n,t){t.open()})},t.closeAll=function(){n.each(t.dialogs,function(n,t){t.close()})},t.moveFocus=function(){var i=null;n.each(t.dialogs,function(n,t){i=t});i!==null&&i.isRealized()&&i.getModal().focus()},t.showScrollbar=function(){var i=null,r;n.each(t.dialogs,function(n,t){i=t});i!==null&&i.isRealized()&&i.isOpened()&&(r=i.getModal().data("bs.modal"),r.checkScrollbar(),n("body").addClass("modal-open"),r.setScrollbar())},t.prototype={constructor:t,initOptions:function(t){return this.options=n.extend(!0,this.defaultOptions,t),this},holdThisInstance:function(){return t.dialogs[this.getId()]=this,this},initModalStuff:function(){return this.setModal(this.createModal()).setModalDialog(this.createModalDialog()).setModalContent(this.createModalContent()).setModalHeader(this.createModalHeader()).setModalBody(this.createModalBody()).setModalFooter(this.createModalFooter()),this.getModal().append(this.getModalDialog()),this.getModalDialog().append(this.getModalContent()),this.getModalContent().append(this.getModalHeader()).append(this.getModalBody()).append(this.getModalFooter()),this},createModal:function(){var t=n('<div class="modal" tabindex="-1" role="dialog" aria-hidden="true"><\/div>');return t.prop("id",this.getId()).attr("aria-labelledby",this.getId()+"_title"),t},getModal:function(){return this.$modal},setModal:function(n){return this.$modal=n,this},createModalDialog:function(){return n('<div class="modal-dialog"><\/div>')},getModalDialog:function(){return this.$modalDialog},setModalDialog:function(n){return this.$modalDialog=n,this},createModalContent:function(){return n('<div class="modal-content"><\/div>')},getModalContent:function(){return this.$modalContent},setModalContent:function(n){return this.$modalContent=n,this},createModalHeader:function(){return n('<div class="modal-header"><\/div>')},getModalHeader:function(){return this.$modalHeader},setModalHeader:function(n){return this.$modalHeader=n,this},createModalBody:function(){return n('<div class="modal-body"><\/div>')},getModalBody:function(){return this.$modalBody},setModalBody:function(n){return this.$modalBody=n,this},createModalFooter:function(){return n('<div class="modal-footer"><\/div>')},getModalFooter:function(){return this.$modalFooter},setModalFooter:function(n){return this.$modalFooter=n,this},createDynamicContent:function(n){var t=null;return t=typeof n=="function"?n.call(n,this):n,typeof t=="string"&&(t=this.formatStringContent(t)),t},formatStringContent:function(n){return this.options.nl2br?n.replace(/\r\n/g,"<br />").replace(/[\r\n]/g,"<br />"):n},setData:function(n,t){return this.options.data[n]=t,this},getData:function(n){return this.options.data[n]},setId:function(n){return this.options.id=n,this},getId:function(){return this.options.id},getType:function(){return this.options.type},setType:function(n){return this.options.type=n,this.updateType(),this},updateType:function(){if(this.isRealized()){var n=[t.TYPE_DEFAULT,t.TYPE_INFO,t.TYPE_PRIMARY,t.TYPE_SUCCESS,t.TYPE_WARNING,t.TYPE_DANGER];this.getModal().removeClass(n.join(" ")).addClass(this.getType())}return this},getSize:function(){return this.options.size},setSize:function(n){return this.options.size=n,this},getCssClass:function(){return this.options.cssClass},setCssClass:function(n){return this.options.cssClass=n,this},getTitle:function(){return this.options.title},setTitle:function(n){return this.options.title=n,this.updateTitle(),this},updateTitle:function(){if(this.isRealized()){var n=this.getTitle()!==null?this.createDynamicContent(this.getTitle()):this.getDefaultText();this.getModalHeader().find("."+this.getNamespace("title")).html("").append(n).prop("id",this.getId()+"_title")}return this},getMessage:function(){return this.options.message},setMessage:function(n){return this.options.message=n,this.updateMessage(),this},updateMessage:function(){if(this.isRealized()){var n=this.createDynamicContent(this.getMessage());this.getModalBody().find("."+this.getNamespace("message")).html("").append(n)}return this},isClosable:function(){return this.options.closable},setClosable:function(n){return this.options.closable=n,this.updateClosable(),this},setCloseByBackdrop:function(n){return this.options.closeByBackdrop=n,this},canCloseByBackdrop:function(){return this.options.closeByBackdrop},setCloseByKeyboard:function(n){return this.options.closeByKeyboard=n,this},canCloseByKeyboard:function(){return this.options.closeByKeyboard},isAnimate:function(){return this.options.animate},setAnimate:function(n){return this.options.animate=n,this},updateAnimate:function(){return this.isRealized()&&this.getModal().toggleClass("fade",this.isAnimate()),this},getSpinicon:function(){return this.options.spinicon},setSpinicon:function(n){return this.options.spinicon=n,this},addButton:function(n){return this.options.buttons.push(n),this},addButtons:function(t){var i=this;return n.each(t,function(n,t){i.addButton(t)}),this},getButtons:function(){return this.options.buttons},setButtons:function(n){return this.options.buttons=n,this.updateButtons(),this},getButton:function(n){return typeof this.indexedButtons[n]!="undefined"?this.indexedButtons[n]:null},getButtonSize:function(){return typeof t.BUTTON_SIZES[this.getSize()]!="undefined"?t.BUTTON_SIZES[this.getSize()]:""},updateButtons:function(){return this.isRealized()&&(this.getButtons().length===0?this.getModalFooter().hide():this.getModalFooter().find("."+this.getNamespace("footer")).html("").append(this.createFooterButtons())),this},isAutodestroy:function(){return this.options.autodestroy},setAutodestroy:function(n){this.options.autodestroy=n},getDescription:function(){return this.options.description},setDescription:function(n){return this.options.description=n,this},getDefaultText:function(){return t.DEFAULT_TEXTS[this.getType()]},getNamespace:function(n){return t.NAMESPACE+"-"+n},createHeaderContent:function(){var t=n("<div><\/div>");return t.addClass(this.getNamespace("header")),t.append(this.createTitleContent()),t.prepend(this.createCloseButton()),t},createTitleContent:function(){var t=n("<div><\/div>");return t.addClass(this.getNamespace("title")),t},createCloseButton:function(){var t=n("<div><\/div>"),i;t.addClass(this.getNamespace("close-button"));i=n('<button class="close">&times;<\/button>');t.append(i);t.on("click",{dialog:this},function(n){n.data.dialog.close()});return t},createBodyContent:function(){var t=n("<div><\/div>");return t.addClass(this.getNamespace("body")),t.append(this.createMessageContent()),t},createMessageContent:function(){var t=n("<div><\/div>");return t.addClass(this.getNamespace("message")),t},createFooterContent:function(){var t=n("<div><\/div>");return t.addClass(this.getNamespace("footer")),t},createFooterButtons:function(){var r=this,i=n("<div><\/div>");return i.addClass(this.getNamespace("footer-buttons")),this.indexedButtons={},n.each(this.options.buttons,function(n,u){u.id||(u.id=t.newGuid());var f=r.createButton(u);r.indexedButtons[u.id]=f;i.append(f)}),i},createButton:function(t){var i=n('<button class="btn"><\/button>');i.addClass(this.getButtonSize());i.prop("id",t.id);typeof t.icon!="undefined"&&n.trim(t.icon)!==""&&i.append(this.createButtonIcon(t.icon));typeof t.label!="undefined"&&i.append(t.label);typeof t.cssClass!="undefined"&&n.trim(t.cssClass)!==""?i.addClass(t.cssClass):i.addClass("btn-default");typeof t.hotkey!="undefined"&&(this.registeredButtonHotkeys[t.hotkey]=i);i.on("click",{dialog:this,$button:i,button:t},function(n){var r=n.data.dialog,i=n.data.$button,t=n.data.button;typeof t.action=="function"&&t.action.call(i,r);t.autospin&&i.toggleSpin(!0)});return this.enhanceButton(i),i},enhanceButton:function(n){return n.dialog=this,n.toggleEnable=function(n){var t=this;return typeof n!="undefined"?t.prop("disabled",!n).toggleClass("disabled",!n):t.prop("disabled",!t.prop("disabled")),t},n.enable=function(){var n=this;return n.toggleEnable(!0),n},n.disable=function(){var n=this;return n.toggleEnable(!1),n},n.toggleSpin=function(t){var i=this,r=i.dialog,u=i.find("."+r.getNamespace("button-icon"));return typeof t=="undefined"&&(t=!(n.find(".icon-spin").length>0)),t?(u.hide(),n.prepend(r.createButtonIcon(r.getSpinicon()).addClass("icon-spin"))):(u.show(),n.find(".icon-spin").remove()),i},n.spin=function(){var n=this;return n.toggleSpin(!0),n},n.stopSpin=function(){var n=this;return n.toggleSpin(!1),n},this},createButtonIcon:function(t){var i=n("<span><\/span>");return i.addClass(this.getNamespace("button-icon")).addClass(t),i},enableButtons:function(t){return n.each(this.indexedButtons,function(n,i){i.toggleEnable(t)}),this},updateClosable:function(){return this.isRealized()&&this.getModalHeader().find("."+this.getNamespace("close-button")).toggle(this.isClosable()),this},onShow:function(n){return this.options.onshow=n,this},onShown:function(n){return this.options.onshown=n,this},onHide:function(n){return this.options.onhide=n,this},onHidden:function(n){return this.options.onhidden=n,this},isRealized:function(){return this.realized},setRealized:function(n){return this.realized=n,this},isOpened:function(){return this.opened},setOpened:function(n){return this.opened=n,this},handleModalEvents:function(){this.getModal().on("show.bs.modal",{dialog:this},function(n){var t=n.data.dialog;if(typeof t.options.onshow=="function")return t.options.onshow(t)});this.getModal().on("shown.bs.modal",{dialog:this},function(n){var t=n.data.dialog;typeof t.options.onshown=="function"&&t.options.onshown(t)});this.getModal().on("hide.bs.modal",{dialog:this},function(n){var t=n.data.dialog;if(typeof t.options.onhide=="function")return t.options.onhide(t)});this.getModal().on("hidden.bs.modal",{dialog:this},function(i){var r=i.data.dialog;typeof r.options.onhidden=="function"&&r.options.onhidden(r);r.isAutodestroy()&&n(this).remove();t.moveFocus()});this.getModal().on("click",{dialog:this},function(n){n.target===this&&n.data.dialog.isClosable()&&n.data.dialog.canCloseByBackdrop()&&n.data.dialog.close()});this.getModal().on("keyup",{dialog:this},function(n){n.which===27&&n.data.dialog.isClosable()&&n.data.dialog.canCloseByKeyboard()&&n.data.dialog.close()});this.getModal().on("keyup",{dialog:this},function(t){var r=t.data.dialog,i;typeof r.registeredButtonHotkeys[t.which]!="undefined"&&(i=n(r.registeredButtonHotkeys[t.which]),i.prop("disabled")||i.focus().trigger("click"))});return this},makeModalDraggable:function(){if(this.options.draggable){this.getModalHeader().addClass(this.getNamespace("draggable")).on("mousedown",{dialog:this},function(n){var t=n.data.dialog,i;t.draggableData.isMouseDown=!0;i=t.getModalDialog().offset();t.draggableData.mouseOffset={top:n.clientY-i.top,left:n.clientX-i.left}});this.getModal().on("mouseup mouseleave",{dialog:this},function(n){n.data.dialog.draggableData.isMouseDown=!1});n("body").on("mousemove",{dialog:this},function(n){var t=n.data.dialog;t.draggableData.isMouseDown&&t.getModalDialog().offset({top:n.clientY-t.draggableData.mouseOffset.top,left:n.clientX-t.draggableData.mouseOffset.left})})}return this},updateZIndex:function(){var i=0,r,u;return n.each(t.dialogs,function(){i++}),r=this.getModal(),u=r.data("bs.modal").$backdrop,r.css("z-index",t.ZINDEX_MODAL+(i-1)*20),u.css("z-index",t.ZINDEX_BACKDROP+(i-1)*20),this},realize:function(){return this.initModalStuff(),this.getModal().addClass(t.NAMESPACE).addClass(this.getSize()).addClass(this.getCssClass()),this.getDescription()&&this.getModal().attr("aria-describedby",this.getDescription()),this.getModalFooter().append(this.createFooterContent()),this.getModalHeader().append(this.createHeaderContent()),this.getModalBody().append(this.createBodyContent()),this.getModal().modal({backdrop:"static",keyboard:!1,show:!1}),this.makeModalDraggable(),this.handleModalEvents(),this.setRealized(!0),this.updateButtons(),this.updateType(),this.updateTitle(),this.updateMessage(),this.updateClosable(),this.updateAnimate(),this},open:function(){return this.isRealized()||this.realize(),this.getModal().modal("show"),this.updateZIndex(),this.setOpened(!0),this},close:function(){return this.getModal().modal("hide"),this.isAutodestroy()&&delete t.dialogs[this.getId()],this.setOpened(!1),t.showScrollbar(),this}},t.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n==="x"?t:t&3|8;return i.toString(16)})},t.show=function(n){return new t(n).open()},t.alert=function(){var i={},r={type:t.TYPE_PRIMARY,title:null,message:null,closable:!0,buttonLabel:t.DEFAULT_TEXTS.OK,callback:null};return i=typeof arguments[0]=="object"&&arguments[0].constructor==={}.constructor?n.extend(!0,r,arguments[0]):n.extend(!0,r,{message:arguments[0],closable:!1,buttonLabel:t.DEFAULT_TEXTS.OK,callback:typeof arguments[1]!="undefined"?arguments[1]:null}),new t({type:i.type,title:i.title,message:i.message,closable:i.closable,data:{callback:i.callback},onhide:function(n){!n.getData("btnClicked")&&n.isClosable()&&typeof n.getData("callback")=="function"&&n.getData("callback")(!1)},buttons:[{label:i.buttonLabel,action:function(n){n.setData("btnClicked",!0);typeof n.getData("callback")=="function"&&n.getData("callback")(!0);n.close()}}]}).open()},t.confirm=function(n,i){return new t({title:"Confirmation",message:n,closable:!1,data:{callback:i},buttons:[{label:t.DEFAULT_TEXTS.CANCEL,action:function(n){typeof n.getData("callback")=="function"&&n.getData("callback")(!1);n.close()}},{label:t.DEFAULT_TEXTS.OK,cssClass:"btn-primary",action:function(n){typeof n.getData("callback")=="function"&&n.getData("callback")(!0);n.close()}}]}).open()},t.warning=function(n){return new t({type:t.TYPE_WARNING,message:n}).open()},t.danger=function(n){return new t({type:t.TYPE_DANGER,message:n}).open()},t.success=function(n){return new t({type:t.TYPE_SUCCESS,message:n}).open()},t});